From bfbe7e7210ccf471083714161229be38ca4a4188 Mon Sep 17 00:00:00 2001
From: Ryan Curtin <ryan@ratml.org>
Date: Tue, 1 Nov 2022 16:29:33 -0400
Subject: [PATCH] Try another patch.

---
 src/mlpack/bindings/python/setup.py.in | 7 ++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/src/mlpack/bindings/python/setup.py.in b/src/mlpack/bindings/python/setup.py.in
index aabd85a6fb..66629ca942 100644
--- a/src/mlpack/bindings/python/setup.py.in
+++ b/src/mlpack/bindings/python/setup.py.in
@@ -49,7 +49,7 @@ else:
   extra_cxx_flags = re.sub(' +', ' ', cxx_flags)
   cxx_flags += ' '
   cxx_flags += extra_cxx_flags
-  extra_args = ['-DBINDING_TYPE=BINDING_TYPE_PYX', '-std=c++14']
+  extra_args = ['-DBINDING_TYPE=BINDING_TYPE_PYX', '-std=c++17']
   if '${OpenMP_CXX_FLAGS}' != '':
     extra_args.append('${OpenMP_CXX_FLAGS}')
   if cxx_flags:
@@ -58,6 +58,9 @@ else:
   # Extra options for MSVC compiler.
   if platform.system() == 'Windows':
     extra_args.extend(['/MD', '/O2', '/Ob2', '/DNDEBUG'])
+  elif platform.system() == 'Darwin':
+    extra_args.append('-g0')
+  else:
+    extra_args.append('-g0')
+    extra_link_args.append('-Wl,--strip-all')

   # This is used for parallel builds; CMake will set PYX_TO_BUILD accordingly.
   if module is not None:
-- 
2.37.2

