env:
  global:
    - REPO_DIR=mlpack-python-build
    - BUILD_COMMIT=mlpack-3.1.1
    - BUILD_DEPENDS="Cython numpy pandas"
    - TEST_DEPENDS="Cython numpy pandas" # Not sure, but probably ok.
    - PLAT=x86_64
    - UNICODE_WIDTH=32
    - WHEELHOUSE_UPLOADER_USERNAME=mlpack-travis-worker

language: python
python: 3.5
dist: trusty
services: docker

matrix:
  exclude:
    # Exclude the default Python 3.5 build.
    - python: 3.5

  include:
    - os: linux
      env: MB_PYTHON_VERSION=2.7

#    - os: linux
#      env:
#        - MB_PYTHON_VERSION=2.7
#        - UNICODE_WIDTH=16

#    - os: linux
#      env:
#        - MB_PYTHON_VERSION=2.7
#        - PLAT=i686

#    - os: linux
#      env:
#        - MB_PYTHON_VERSION=2.7
#        - PLAT=i686
#        - UNICODE_WIDTH=16

#    - os: linux
#      env:
#        - MB_PYTHON_VERSION=3.4

#    - os: linux
#      env:
#        - MB_PYTHON_VERSION=3.4
#        - PLAT=i686

#    - os: linux
#      env:
#        - MB_PYTHON_VERSION=3.5

#    - os: linux
#      env:
#        - MB_PYTHON_VERSION=3.5
#        - PLAT=i686

#    - os: linux
#      env:
#        - MB_PYTHON_VERSION=3.6

#    - os: linux
#      env:
#        - MB_PYTHON_VERSION=3.6
#        - PLAT=i686

#    - os: linux
#      env:
#        - MB_PYTHON_VERSION=3.7

#    - os: linux
#      env:
#        - MB_PYTHON_VERSION=3.7
#        - PLAT=i686

#    - os: osx
#      language: generic
#      env:
#        - MB_PYTHON_VERSION=2.7

#    - os: osx
#      env:
#        - MB_PYTHON_VERSION=2.7
#        - MB_PYTHON_OSX_VER=10.9

#    - os: osx
#      language: generic
#      env:
#        - MB_PYTHON_VERSION=3.4

#    - os: osx
#      language: generic
#      env:
#        - MB_PYTHON_VERSION=3.5

#    - os: osx
#      language: generic
#      env:
#        - MB_PYTHON_VERSION=3.6

#    - os: osx
#      language: generic
#      env:
#        - MB_PYTHON_VERSION=3.7
#        - MB_PYTHON_OSX_VER=10.9

#    - os: osx
#      language: generic
#      env:
#        - MB_PYTHON_VERSION=pypy-5.7

before_install:
  - source multibuild/common_utils.sh
  - source multibuild/travis_steps.sh
  - before_install

install:
  - clean_code $REPO_DIR $BUILD_COMMIT
  - build_wheel $REPO_DIR $PLAT

script:
  - install_run $PLAT

after_success:
  - echo "hooray!"
