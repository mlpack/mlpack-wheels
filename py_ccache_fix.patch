From 4e19b03f9038a9722f14aaafebf764e5ab82ae9e Mon Sep 17 00:00:00 2001
From: Ryan Curtin <ryan@ratml.org>
Date: Mon, 2 Feb 2026 10:16:26 -0500
Subject: [PATCH] Make sure `ccache_prog` is empty when ccache is not found.

---
 src/mlpack/bindings/python/CMakeLists.txt | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/src/mlpack/bindings/python/CMakeLists.txt b/src/mlpack/bindings/python/CMakeLists.txt
index 6b731abc1b..c79048bc76 100644
--- a/src/mlpack/bindings/python/CMakeLists.txt
+++ b/src/mlpack/bindings/python/CMakeLists.txt
@@ -16,6 +16,10 @@ macro (post_python_bindings)
   if (BUILDING_PYTHON_BINDINGS)
     get_property(CYTHON_INCLUDE_DIRECTORIES DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
         PROPERTY INCLUDE_DIRECTORIES)
+    set(PY_CCACHE_PROGRAM "")
+    if (CCACHE_PROGRAM)
+      set(PY_CCACHE_PROGRAM "${CCACHE_PROGRAM}")
+    endif ()
     add_custom_target(python_configure
         COMMAND ${CMAKE_COMMAND}
             -D GENERATE_CPP_IN=${CMAKE_SOURCE_DIR}/src/mlpack/bindings/python/setup.py.in
@@ -29,7 +33,7 @@ macro (post_python_bindings)
             -D CMAKE_CXX_FLAGS=${CMAKE_CXX_FLAGS}
             -D EXTRA_CXX_FLAGS="-DMLPACK_PRINT_INFO -DMLPACK_PRINT_WARN"
             -D OUTPUT_DIR=${CMAKE_BINARY_DIR}
-            -D CCACHE_PROGRAM=${CCACHE_PROGRAM}
+            -D CCACHE_PROGRAM=${PY_CCACHE_PROGRAM}
             -D CMAKE_CXX_COMPILER=${CMAKE_CXX_COMPILER}
             -P "${CMAKE_SOURCE_DIR}/CMake/ConfigureFile.cmake"
         BYPRODUCTS "${CMAKE_BINARY_DIR}/src/mlpack/bindings/python/setup.py"
-- 
2.51.0

